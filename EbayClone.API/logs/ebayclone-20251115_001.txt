2025-11-15 02:16:31.149 +07:00 [INF] Starting EbayClone.API
2025-11-15 02:16:31.289 +07:00 [INF] RabbitMQ connection established
2025-11-15 02:16:31.307 +07:00 [INF] Order Timeout Background Service started
2025-11-15 02:16:31.387 +07:00 [INF] Escrow Release Background Service started
2025-11-15 02:16:31.393 +07:00 [INF] EmailConsumerService started
2025-11-15 02:16:31.401 +07:00 [INF] Started consuming from order.email
2025-11-15 02:16:31.444 +07:00 [INF] Bắt đầu gửi email tới hoan0912527403@gmail.com với subject: Payment Confirmed - Order #bfdc2007-5ca1-4c39-8a83-8c80faf70068
2025-11-15 02:16:31.447 +07:00 [INF] 
=== EMAIL SENT ===
To: hoan0912527403@gmail.com
Subject: Payment Confirmed - Order #bfdc2007-5ca1-4c39-8a83-8c80faf70068
Body: Payment successful...
==================
2025-11-15 02:16:31.465 +07:00 [INF] Bắt đầu gửi email tới hoan0912527403@gmail.com với subject: Payment Confirmed - Order #e06aee8c-394d-4298-8e71-0aeb4a790bb3
2025-11-15 02:16:31.467 +07:00 [INF] 
=== EMAIL SENT ===
To: hoan0912527403@gmail.com
Subject: Payment Confirmed - Order #e06aee8c-394d-4298-8e71-0aeb4a790bb3
Body: Payment successful...
==================
2025-11-15 02:16:31.467 +07:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://[::1]:5268: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-11-15 02:16:31.480 +07:00 [INF] Bắt đầu gửi email tới hoan0912527403@gmail.com với subject: Payment Confirmed - Order #a312e98e-4f4f-4708-9182-bc47d59a775e
2025-11-15 02:16:31.486 +07:00 [INF] 
=== EMAIL SENT ===
To: hoan0912527403@gmail.com
Subject: Payment Confirmed - Order #a312e98e-4f4f-4708-9182-bc47d59a775e
Body: Payment successful...
==================
2025-11-15 02:16:31.488 +07:00 [INF] Bắt đầu gửi email tới hoan0912527403@gmail.com với subject: Payment Confirmed - Order #c22c0864-0d5f-4972-b825-59b23c7b4812
2025-11-15 02:16:31.490 +07:00 [INF] 
=== EMAIL SENT ===
To: hoan0912527403@gmail.com
Subject: Payment Confirmed - Order #c22c0864-0d5f-4972-b825-59b23c7b4812
Body: Payment successful...
==================
2025-11-15 02:16:31.492 +07:00 [INF] Bắt đầu gửi email tới hoan0912527403@gmail.com với subject: Payment Confirmed - Order #572b3cf4-5ec3-4bc2-b595-f9741bfd12de
2025-11-15 02:16:31.493 +07:00 [INF] 
=== EMAIL SENT ===
To: hoan0912527403@gmail.com
Subject: Payment Confirmed - Order #572b3cf4-5ec3-4bc2-b595-f9741bfd12de
Body: Payment successful...
==================
2025-11-15 02:16:31.498 +07:00 [ERR] BackgroundService failed
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at EbayClone.API.OrderTimeoutBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in C:\KienZone\gitClone\prn2\Prn232\EbayClone.API\Services\BackgroundService.cs:line 41
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-11-15 02:16:31.498 +07:00 [ERR] BackgroundService failed
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at EbayClone.API.EscrowReleaseBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in C:\KienZone\gitClone\prn2\Prn232\EbayClone.API\Services\BackgroundService.cs:line 78
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-11-15 02:16:31.498 +07:00 [FTL] Application terminated unexpectedly
System.IO.IOException: Failed to bind to address http://[::1]:5268: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in C:\KienZone\gitClone\prn2\Prn232\EbayClone.API\Program.cs:line 132
2025-11-15 02:16:59.892 +07:00 [INF] Starting EbayClone.API
2025-11-15 02:17:00.026 +07:00 [INF] RabbitMQ connection established
2025-11-15 02:17:00.044 +07:00 [INF] Order Timeout Background Service started
2025-11-15 02:17:00.148 +07:00 [INF] Escrow Release Background Service started
2025-11-15 02:17:00.156 +07:00 [INF] EmailConsumerService started
2025-11-15 02:17:00.162 +07:00 [INF] Started consuming from order.email
2025-11-15 02:17:00.220 +07:00 [INF] Bắt đầu gửi email tới hoan0912527403@gmail.com với subject: Payment Confirmed - Order #bfdc2007-5ca1-4c39-8a83-8c80faf70068
2025-11-15 02:17:00.223 +07:00 [INF] 
=== EMAIL SENT ===
To: hoan0912527403@gmail.com
Subject: Payment Confirmed - Order #bfdc2007-5ca1-4c39-8a83-8c80faf70068
Body: Payment successful...
==================
2025-11-15 02:17:00.241 +07:00 [INF] Bắt đầu gửi email tới hoan0912527403@gmail.com với subject: Payment Confirmed - Order #e06aee8c-394d-4298-8e71-0aeb4a790bb3
2025-11-15 02:17:00.242 +07:00 [INF] 
=== EMAIL SENT ===
To: hoan0912527403@gmail.com
Subject: Payment Confirmed - Order #e06aee8c-394d-4298-8e71-0aeb4a790bb3
Body: Payment successful...
==================
2025-11-15 02:17:00.244 +07:00 [INF] Bắt đầu gửi email tới hoan0912527403@gmail.com với subject: Payment Confirmed - Order #a312e98e-4f4f-4708-9182-bc47d59a775e
2025-11-15 02:17:00.246 +07:00 [INF] 
=== EMAIL SENT ===
To: hoan0912527403@gmail.com
Subject: Payment Confirmed - Order #a312e98e-4f4f-4708-9182-bc47d59a775e
Body: Payment successful...
==================
2025-11-15 02:17:00.246 +07:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://[::1]:5268: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-11-15 02:17:00.258 +07:00 [INF] Bắt đầu gửi email tới hoan0912527403@gmail.com với subject: Payment Confirmed - Order #c22c0864-0d5f-4972-b825-59b23c7b4812
2025-11-15 02:17:00.267 +07:00 [INF] 
=== EMAIL SENT ===
To: hoan0912527403@gmail.com
Subject: Payment Confirmed - Order #c22c0864-0d5f-4972-b825-59b23c7b4812
Body: Payment successful...
==================
2025-11-15 02:17:00.270 +07:00 [INF] Bắt đầu gửi email tới hoan0912527403@gmail.com với subject: Payment Confirmed - Order #572b3cf4-5ec3-4bc2-b595-f9741bfd12de
2025-11-15 02:17:00.272 +07:00 [INF] 
=== EMAIL SENT ===
To: hoan0912527403@gmail.com
Subject: Payment Confirmed - Order #572b3cf4-5ec3-4bc2-b595-f9741bfd12de
Body: Payment successful...
==================
2025-11-15 02:17:00.275 +07:00 [ERR] BackgroundService failed
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at EbayClone.API.OrderTimeoutBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in C:\KienZone\gitClone\prn2\Prn232\EbayClone.API\Services\BackgroundService.cs:line 41
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-11-15 02:17:00.276 +07:00 [ERR] BackgroundService failed
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at EbayClone.API.EscrowReleaseBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in C:\KienZone\gitClone\prn2\Prn232\EbayClone.API\Services\BackgroundService.cs:line 78
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-11-15 02:17:00.276 +07:00 [FTL] Application terminated unexpectedly
System.IO.IOException: Failed to bind to address http://[::1]:5268: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in C:\KienZone\gitClone\prn2\Prn232\EbayClone.API\Program.cs:line 132
